<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Gallery</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/png" href="favicon.png">
  <link rel="stylesheet" href="gallery3.css">
</head>

<body>

<!-- ================= TITLE ================= -->
<section class="gallery-title">
  <h1 id="gallery-title">Gallery</h1>

  <div class="back-button">
    <a href="places.html">← Back to Places</a>
  </div>
</section>

<!-- ================= GRID ================= -->
<section class="gallery-grid" id="gallery"></section>

<!-- ================= LIGHTBOX ================= -->
<div id="lightbox" class="lightbox">
  <span class="close">&times;</span>
  <img id="lightbox-img">
  <span class="prev">&#10094;</span>
  <span class="next">&#10095;</span>
</div>

<script>
/* =========================================
   READ TYPE FROM URL
========================================= */
const params = new URLSearchParams(window.location.search);
const type = (params.get("type") || "").trim();

/* =========================================
   DISPLAY TITLES
========================================= */
const displayNames = {
  "Madikwe": "Madikwe Game Reserve"
};

/* =========================================
   IMAGES
   -> HIER TRÄGST DU EINFACH ALLE MADIKWE-BILDER EIN
========================================= */
const images = {
  "Madikwe": [
    "madikwe-19.jpg",
  ]
};

/* =========================================
   SET TITLE
========================================= */
document.getElementById("gallery-title").textContent =
  displayNames[type] || "Gallery";

/* =========================================
   LOAD IMAGES
========================================= */
const container = document.getElementById("gallery");

if (images[type] && images[type].length) {
  images[type].forEach(src => {
    const img = document.createElement("img");
    img.src = src;
    img.loading = "lazy";
    container.appendChild(img);
  });
} else {
  container.innerHTML = "<p style='text-align:center'>No images found.</p>";
}

/* =========================================
   LIGHTBOX
========================================= */
const lightbox = document.getElementById("lightbox");
const lightboxImg = document.getElementById("lightbox-img");
const closeBtn = document.querySelector(".close");
const nextBtn = document.querySelector(".next");
const prevBtn = document.querySelector(".prev");

let index = 0;

function getGalleryImgs() {
  return document.querySelectorAll("#gallery img");
}

function openLightbox() {
  const galleryImgs = getGalleryImgs();
  if (!galleryImgs.length) return;

  lightbox.style.display = "flex";
  lightboxImg.src = galleryImgs[index].src;
}

function closeLightbox() {
  lightbox.style.display = "none";
}

document.addEventListener("click", (e) => {
  if (e.target.matches("#gallery img")) {
    const imgs = Array.from(getGalleryImgs());
    index = imgs.indexOf(e.target);
    openLightbox();
  }
});

closeBtn.onclick = closeLightbox;

nextBtn.onclick = () => {
  const galleryImgs = getGalleryImgs();
  index = (index + 1) % galleryImgs.length;
  openLightbox();
};

prevBtn.onclick = () => {
  const galleryImgs = getGalleryImgs();
  index = (index - 1 + galleryImgs.length) % galleryImgs.length;
  openLightbox();
};

document.addEventListener("keydown", e => {
  if (e.key === "Escape") closeLightbox();
  if (e.key === "ArrowRight") nextBtn.click();
  if (e.key === "ArrowLeft") prevBtn.click();
});
</script>

</body>
</html>
